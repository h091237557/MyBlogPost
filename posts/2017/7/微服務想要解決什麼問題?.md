# Node之可擴展性---微服務
在這系統的文章中，我們的第一篇有提到，根據`The Art of scalability`的內容，在擴展系統時，可以使用以下三個維度來進行說明 : 

* X 軸 : 複制 
* Y 軸 : 以服務/功能分解
* Z 軸 : 以資料來分解

我們在『Node之可擴展性---Node的cluster』與『Node之可擴展性---Nginx反向代理建立』這兩篇文章，它們都是使用`X軸`擴展技術，也就是所謂的將一個應用，複制成多個，並且可以使用反向代理器來進行流量分配。

而接下來我們這篇文章要來討論的為`Y軸 : 以服務/功能分解`的擴展性技術，就是`Martin Fowler`與`James Lewis`共同提出的`微服務`概念，所以接下來我們就要來開始學習什麼是微服務。

## 微服務是什麼呢 ?
那微服務是什麼呢 ? 簡單的說就是 :

> 將塞在一起的服務( monolitch )，拆解成多個不同的小服務，然後再靠 API 或其它的通訊技術來串聯起，這就是微服務。

我們先來看看單體式架構如下，它就是塞成一堆。 

![]()

接下來我們來看看微服務架構圖，如下，它就是都拆開來。

![]()

對了上面畫的圖中，雖然是每個服務都搭配一個資料庫，但實際上會有以下幾種規劃方式 : 

* 每個服務都各有一個資料庫，同屬性的服務可共享同個資料庫。
* 所有服務都共享同一個資料庫，但是不同表格，並且不會跨域存取。
* 每個服務都各有一個資料庫，就算是同屬性的服務也是，資料庫並不會共享。


## 他有什麼優點呢 ?
它有以下兩個優點 : 

### 所有的服務都是可以拋棄的
也就是說，如果你整個系統是使用微服架構的話，當某個應用掛掉了，不會影響到其它應用，例如我們常見的購物網站，如果你結帳系統掛掉了，使用者依然還是可以繼續的逛網路。

### 跨多種平台與語言的使用
假設我們突然注意到，某個服務適合使用其它語言或架構來處理，那如果在本的單塊架構下，幾乎無法更動，而在微服務，則很簡單的就可以替換，因為他們是獨立的，只用 API 溝通。

### 可擴展性極高
就如同我們最上面所提的，它就是`Y 軸`的擴展，它可以將每個服務都架設到不同的節點，同時間，我們還可以在微服務上，進行其它`X 軸 和 Z 軸`的擴展，這也使得我們可以處理更多的流量。

## 那他的缺點又是啥 ? 
有以下三點 : 

### 複雜度高
微服務基本上就是個分散式架構，但只要聽到這東西，就是會有個印象 : 

> 複雜

首先第一個複雜點就是`debug`，以前只要開啟一個服務來 debug ，現在要改 n 個，它有一點就是維護的問題，因為有多個所以維護起來，變個更加的複雜，還有一個就是開發流程，由於你的服務變多了，所以相對的版控、自動化測試、CI/CD這些，就變更複雜，但如果沒有的做上面這些的話，你一定會死，保證。

### 網路問題
微服務是分散式系統，所到這個一定會想到網路的問題。

### 資料一致性問題 
因為我們是多節點，所以一定會發生資料不一致的問題，要如何解決呢 ?  後面應用會提到，大概。


## Nodejs 的 microservices toolkit




